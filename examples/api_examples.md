# GreenPulse API Guide

This guide provides all examples for using the GreenPulse API in one cohesive flow. Make sure your Google Earth Engine is authenticated, your `GEE_PROJECT_ID` and `API_KEY` are set, and optionally your `GROQ_API_KEY` and `GROQ_MODEL` if using AI assistant features.

All endpoints (except `/api/health`) require the header `X-API-Key: your_api_key_here`.

Health check: `curl -X GET http://localhost:5000/api/health` returns `{"status":"healthy","service":"GreenPulse Backend","earth_engine_initialized":true}`.

Yield prediction: `curl -X POST http://localhost:5000/api/yield-prediction -H "X-API-Key: your_api_key_here" -H "Content-Type: application/json" -d '{"coordinates":[[[-120.5,37.0],[-120.5,37.05],[-120.45,37.05],[-120.45,37.0],[-120.5,37.0]]],"start_date":"2024-09-01","end_date":"2024-10-01"}'` returns `{"high_productivity_percent":45.2,"medium_productivity_percent":38.7,"low_productivity_percent":16.1,"ndvi_stats":{"NDVI_mean":0.68,"NDVI_min":0.22,"NDVI_max":0.89,"NDVI_stdDev":0.15},"analysis_period":{"start_date":"2024-09-01","end_date":"2024-10-01"}}`.

Water stress detection: `curl -X POST http://localhost:5000/api/water-stress -H "X-API-Key: your_api_key_here" -H "Content-Type: application/json" -d '{"coordinates":[[[-120.5,37.0],[-120.5,37.05],[-120.45,37.05],[-120.45,37.0],[-120.5,37.0]]],"start_date":"2024-10-01","end_date":"2024-11-01"}'` returns `{"average_moisture_index":0.25,"min_moisture_index":-0.05,"max_moisture_index":0.52,"water_stress_area_percent":42.3,"requires_irrigation":true,"analysis_period":{"start_date":"2024-10-01","end_date":"2024-11-01"}}`.

Crop growth tracking: `curl -X POST http://localhost:5000/api/crop-growth -H "X-API-Key: your_api_key_here" -H "Content-Type: application/json" -d '{"coordinates":[[[-120.5,37.0],[-120.5,37.05],[-120.45,37.05],[-120.45,37.0],[-120.5,37.0]]],"start_date":"2024-08-01","end_date":"2024-11-01","interval_days":10}'` returns `{"time_series":[{"date":"2024-08-05","ndvi":0.42},{"date":"2024-08-15","ndvi":0.51},{"date":"2024-08-25","ndvi":0.63},{"date":"2024-09-04","ndvi":0.71},{"date":"2024-09-14","ndvi":0.75},{"date":"2024-09-24","ndvi":0.78},{"date":"2024-10-04","ndvi":0.72},{"date":"2024-10-14","ndvi":0.68},{"date":"2024-10-24","ndvi":0.61}],"trend":"declining","data_points":9,"analysis_period":{"start_date":"2024-08-01","end_date":"2024-11-01"}}`.

Disease & pest alert: `curl -X POST http://localhost:5000/api/disease-alert -H "X-API-Key: your_api_key_here" -H "Content-Type: application/json" -d '{"coordinates":[[[-120.5,37.0],[-120.5,37.05],[-120.45,37.05],[-120.45,37.0],[-120.5,37.0]]],"start_date":"2024-10-15","end_date":"2024-11-01"}'` returns `{"ndvi_change_mean":-0.12,"ndvi_change_min":-0.35,"ndvi_change_max":0.08,"ndvi_change_stddev":0.09,"anomaly_area_percent":18.5,"risk_level":"high","alert":true,"analysis_period":{"start_date":"2024-10-15","end_date":"2024-11-01"}}`.

Historical comparison: `curl -X POST http://localhost:5000/api/historical-comparison -H "X-API-Key: your_api_key_here" -H "Content-Type: application/json" -d '{"coordinates":[[[-120.5,37.0],[-120.5,37.05],[-120.45,37.05],[-120.45,37.0],[-120.5,37.0]]],"current_start_date":"2024-09-01","current_end_date":"2024-10-01","historical_start_date":"2023-09-01","historical_end_date":"2023-10-01"}'` returns `{"current_ndvi_mean":0.68,"historical_ndvi_mean":0.64,"change_percent":6.25,"analysis_period_current":{"start_date":"2024-09-01","end_date":"2024-10-01"},"analysis_period_historical":{"start_date":"2023-09-01","end_date":"2023-10-01"}}`.